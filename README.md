# LineageOS ROM ダウンローダー

[English ver.](./README.en.md)

お使いのデバイス用のLineageOS ROMやその他のビルド成果物をダウンロードするためのコマンドラインツールです。

このツールは、公式のLineageOSダウンロードポータルから最新のビルドを自動的に取得し、ファイルの整合性を検証し、古いビルドを管理するプロセスを自動化します。

## 主な機能 (Features)

- **自動更新**: LineageOSの公式APIから最新のビルド情報を直接取得します。
- **並列ダウンロード**: 複数のスレッドを使用してダウンロード処理を高速化します。
- **ファイル整合性チェック**: ダウンロードされた各ファイルのSHA-256ハッシュを検証し、ファイルが破損していないことを確認します。
- **自動クリーンアップ**: 古いビルドを自動的に削除し、ダウンロードディレクトリを整理します。
- **柔軟なファイル選択**: ダウンロードするファイルの種類（例: `rom`, `recovery`, `boot`）を個別に指定できます。
- **リサーチモード**: ダウンロードを実行する前に、お使いのデバイスで利用可能なすべてのファイルタイプを調査できます。

## 使い方 (Usage)

### 基本的なダウンロード

最新のROMとリカバリーイメージをダウンロードする場合:

```bash
LineageOS_ROM_Downloader -d <デバイスコード名> -p <ダウンロードパス> -img rom -img recovery
```

### コマンドラインオプション

| オプション   | 説明                                                                                                                                                                                                                                         |
| :----------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `-d`         | **(必須)** デバイスのコードネーム (例: `renoir`, `pioneer`)。                                                                                                                                                                                |
| `-p`         | **(必須)** ファイルをダウンロードするルートパス。                                                                                                                                                                                            |
| `-img`       | (任意) ダウンロードするファイルの種類。複数指定可能。<br />一般的な種類は `rom`, `boot`, `dtbo`, `recovery`, `init_boot`, `super_empty`, `vbmeta`, `vendor_boot` です。<br />`--research` を使用して、利用可能なすべての種類を確認できます。 |
| `-mt`        | (任意) ダウンロード時の最大並列スレッド数。デフォルトは1です。サーバーに負荷をかけるため、注意して使用してください。                                                                                                                         |
| `-k`         | (任意) クリーンアップ時に保持するビルドの世代数。デフォルトは1です。                                                                                                                                                                         |
| `--research` | 特定のデバイスで利用可能なファイルの種類を、ダウンロードせずに一覧表示する特別なモードです。                                                                                                                                                 |

### 使用例 (Examples)

**`renoir` 用のROMとリカバリを `./lineage_builds` にダウンロードする:**
```bash
LineageOS_ROM_Downloader -d renoir -p ./lineage_builds -img rom -img recovery
```

**4つの並列スレッドを使用してROMをダウンロードし、最新の3世代を保持する:**
```bash
LineageOS_ROM_Downloader -d renoir -p ./lineage_builds -img rom -mt 4 -k 3
```

**`pioneer` で利用可能なファイルタイプを調べる:**
```bash
LineageOS_ROM_Downloader --research -d pioneer
```

## ダウンロード (Downloads)

このツールは、.NET 9.0 SDKを使ってご自身でビルドする代わりに、GitHubの[リリース](https://github.com/86chan/LineageOS_ROM_Downloader/releases)ページから直接ダウンロードすることもできます。

リリースページでは、Windows, Linux, macOS 用の自己完結型実行ファイルが提供されています。これらは.NETランタイムがインストールされていない環境でも動作します。お使いのOSに合ったファイルをダウンロードしてご利用ください。

## ビルド方法 (How to Build)

### 前提条件 (Prerequisites)

- [.NET 9.0 SDK](https://dotnet.microsoft.com/download/dotnet/9.0)

### ビルドコマンド (Build Command)

1.  このリポジトリをクローンします。
2.  `src/LineageOS_ROM_Downloader` ディレクトリでターミナルを開きます。
3.  次のコマンドを実行します:

    ```bash
    dotnet publish -c Release
    ```

4.  自己完結型の実行ファイルが `src/publish/` ディレクトリ内に、OSとアーキテクチャごとに整理されて作成されます (例: `src/publish/net9.0/win-x64/`)。このプログラムは、.NETランタイムがインストールされていない環境でも実行できます。
